{% extends "base_template.html" %}

{% block title %}Home - {{ super() }}{% endblock title %}
{% block subtitle %}Part of the httpet family.{% endblock subtitle %}

{% block content %}
<section class="card">
  <h2>Available pets</h2>
  {% if enabled_pets.len() == 0 %}
  <p>No pets are enabled yet. Vote below to add the next one.</p>
  {% else %}
  <div class="grid">
    <ul class="pet-list">
      {% for pet in enabled_pets %}
      <li class="pet">
        <strong><a class="pill" href="{{ state.pet_base_url(pet.name) }}">{{ pet.name }}</a></strong>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
</section>

<section class="card">
  <h2>Top votes (last 7 days)</h2>
  {% if top_pets.len() == 0 %}
  <p>No votes yet. Be the first to vote for a pet.</p>
  {% else %}
  <div class="top-list">
    {% for pet in top_pets %}
    <div class="top-item">
      <div>
        <span class="pill">
          <form method="post" action="/vote/{{ pet.name }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <strong>{{ pet.name }}</strong>
            ({{ pet.votes }} votes)
            <button type="submit">Vote</button>
          </form></span>
      </div>

    </div>
    {% endfor %}
  </div>
  {% endif %}
</section>

<section class="card">
  <h2>Vote for a pet</h2>
  <p>Vote for an existing pet or add a new one to the list.</p>
  <form method="post" action="/vote">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <label>
      Name
      <input type="text" name="name" placeholder="dog">
    </label>
    <button type="submit">Vote</button>
  </form>
</section>
{% endblock content %}